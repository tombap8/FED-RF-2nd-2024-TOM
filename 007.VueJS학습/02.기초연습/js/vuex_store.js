// ë·°ì—‘ìŠ¤ ìŠ¤í† ì•„ êµ¬í˜„ JS 

// ìŠ¤í† ì•„ JS ë¶ˆëŸ¬ì˜¤ê¸° ////
import store from "./store.js";
// defaultë¡œ ë‚´ë³´ë‚´ê¸° í›„ ê¸°ë³¸ì´ë¦„ì€ storeì„!

// ë¼ìš°í„° í…œí”Œë¦¿ ë§Œë“¤ê¸°
let Trip = {
    template: 
    `<div class="trip router">World Trip</div>`
}
let Foods = {
    template: 
    `<div class="foods router">World Foods</div>`
}
// ë¼ìš°í„° ì—°ê²° ì˜µì…˜ ì…‹íŒ…í•˜ê¸°
// let routes = [{},{}]
let routes = [
    // ì²«ë²ˆì§¸ ë£¨íŠ¸
    {
        // router-link ì˜ to ì†ì„±ê°’ê³¼ ë™ì¼
        path: '/trip',
        // ì—°ê²°í•  ì»´í¬ë„ŒíŠ¸
        component: Trip,
    },
    // ë‘ë²ˆì§¸ ë£¨íŠ¸
    {
        // router-link ì˜ to ì†ì„±ê°’ê³¼ ë™ì¼
        path: '/foods',
        // ì—°ê²°í•  ì»´í¬ë„ŒíŠ¸
        component: Foods,
    },
];

// ë¼ìš°í„° ì˜µì…˜ ì—°ê²°í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±í•˜ê¸°!!!
const router = new VueRouter({
    routes // ìœ„ì˜ ë¼ìš°íŠ¸ ì…‹íŒ… ë°°ì—´ë³€ìˆ˜
});
// [ì¤‘ìš”!!!] ë·°ì¸ìŠ¤í„´ìŠ¤ì— ë¼ìš°í„°ë¥¼ ë“±ë¡í•´ì¤˜ì•¼í•¨!
// -> new Vue({el:"",router,methods:{}})

// [ ì¤‘ìš”!!! ]
// ë·°ì¸ìŠ¤í„´ìŠ¤ì— ìŠ¤í† ì•„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë“±ë¡í•´ì¤˜ì•¼í•¨!
// ë“±ë¡ë°©ë²•: new Vue({el:"",store,methods:{}})
// -> ìŠ¤í† ì•„ ë³€ìˆ˜ë¥¼ ê·¸ëŒ€ë¡œ ì¨ì£¼ë©´ ëœë‹¤!!!

// ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ê¸°í•¨ìˆ˜
const makeList  = x => {
    console.log('ë©”ë‰´ë°°ì—´:',x);
    // x ë©”ë‰´ ë°°ì—´
    return x.map(v=>`
    <li>
        <a href="#"
        v-on:click="changeData('${v}')"
        >${v=='ì²˜ìŒ'?'ğŸ’’':v}</a>
    </li>
    `).join('');
    // mapìœ¼ë¡œ ë§Œë“  ë°°ì—´ê°’ì— ì‚¬ì´ì½¤ë§ˆì œê±°ëŠ” join('')
}; ///////// makeListí•¨ìˆ˜ //////

// [1] ì»´í¬ë„ŒíŠ¸ ì…‹íŒ…í•˜ê¸° //////////////
// 1. ìƒë‹¨ì˜ì—­ ì»´í¬ë„ŒíŠ¸ ì…‹íŒ…
Vue.component('top-area',{
    // (1) í…œí”Œë¦¿ ì„¤ì •
    template:`
        <header>
            <ul class="gnb">
                ${makeList(
                    Object.keys(
                        store.state.cityData))}
            </ul>

        </header>
    `,
    // (2) ë¦¬í„´ë°ì´í„° ì„¤ì •
    data(){
        return{};
    },
    // (3) ë©”ì„œë“œ ì„¤ì •
    methods:{
        // ìŠ¤í† ì•„ ë³€ìˆ˜ ì—…ë°ì´íŠ¸ ë©”ì„œë“œ
        changeData(pm){
            console.log('ì—…ë°ì´íŠ¸:',pm);
            // ì—¬ê¸°ì„œ ë°”ë¡œ ìŠ¤í† ì•„ ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤!

            // 1. ì´ë¯¸ì§€ ë³€ìˆ˜ : imgSrc
            // ì´ ìœ„ì¹˜ì—ì„œ ì ‘ê·¼í•˜ë ¤ë©´ store.state ë¡œ ì ‘ê·¼!
            store.state.imgSrc = 
            store.state.cityData[pm].ì´ë¯¸ì§€;

            // 2. ì„¤ëª… ë³€ìˆ˜ : desc
            // ì´ ìœ„ì¹˜ì—ì„œ ì ‘ê·¼í•˜ë ¤ë©´ store.state ë¡œ ì ‘ê·¼!
            store.state.desc = 
            store.state.cityData[pm].ì„¤ëª…;

        }, ////// changeData ë©”ì„œë“œ //////
    }
});

// 2. ë©”ì¸ì˜ì—­ ì»´í¬ë„ŒíŠ¸ ì…‹íŒ…
Vue.component("main-area",{
    /* 
        ì»´í¬ë„ŒíŠ¸ ì˜ì—­ì€ ë·°JSì—ì„œ í•´ì„ë˜ëŠ” ë¶€ë¶„ì´ë¯€ë¡œ
        ë·°ì—‘ìŠ¤ ìŠ¤í† ì–´ì˜ ë³€ìˆ˜ storeë¥¼ 
        ì „ì—­ í‘œì‹œ $store
        ë¼ê³  í‘œê¸°í•´ì•¼ ìœ íš¨í•˜ë‹¤!(ì—ëŸ¬ì—†ìŒ)
        ë” ì •í™•í•œ ë¬¸ë²•ì€ this.$store ë¼ê³  ì¨ì•¼í•˜ì§€ë§Œ
        ì´ íŒŒì¼ì´ ì¼ë°˜ JSì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ ë³€ìˆ˜í• ë‹¹ëœ
        ë·°JS ì¸ìŠ¤í„´ìŠ¤ ì˜ì—­ì•ˆì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ
        ë·°ì¸ìŠ¤í„´ìŠ¤ ìì‹ ì¸ thisë¥¼ ì“°ì§€ ì•Šì•„ë„
        ìë™ì ìœ¼ë¡œ thisë¡œ ì²˜ë¦¬ëœë‹¤!
    */
    template:`
        <main>
            <img 
            v-bind:src="$store.state.imgSrc" 
            alt="ì§€ì—­ì´ë¯¸ì§€">
            <p
            v-text="$store.state.desc"
            ></p>
        </main>
    `,
    data(){
        return{
        }
    },
    methods:{

    }
});
// 3. í•˜ë‹¨ì˜ì—­ ì»´í¬ë„ŒíŠ¸ ì…‹íŒ…
Vue.component("info-area",{
    template:`
        <footer>
            <address>
                ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 119 ë·°ì—‘ìŠ¤B
            </address>
        </footer>
    `,
    data(){
        return{}
    },
    methods:{

    }
});



// [2] ë·° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±í•˜ê¸° /////////////
// ëŒ€ìƒìš”ì†Œ: #app
new Vue({
    // ëŒ€ìƒì„ ì •
    el:"#app",
    store, // ì¤‘ìš”!!! ë·°ì—‘ìŠ¤ ìŠ¤í† ì•„ ë“±ë¡!
    router, // ì¤‘ìš”!!! ë¼ìš°í„° ë“±ë¡!
    data:{
        // ë³€ìˆ˜:ê°’
    },
    methods:{
        // ë©”ì„œë“œ(){}
    },
    // ë°ì´í„° ì…‹íŒ…êµ¬ì—­ : ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì§í›„(created)
    created(){
        /* 
        ìŠ¤í† ì–´ì— ìˆëŠ” initSet ë©”ì„œë“œëŠ” ì–´ë–»ê²Œ í˜¸ì¶œí•˜ì§€?
        ìŠ¤í† ì–´ í˜¸ì¶œ ë©”ì„œë“œê°€ ë”°ë¡œ ìˆìŒ!
        store.commit("ë©”ì„œë“œëª…",íŒŒë¼ë¯¸í„°ê°’)
        1. ë©”ì„œë“œëª…ì€ ë°˜ë“œì‹œ ë¬¸ìí˜•ìœ¼ë¡œ ì…ë ¥í•œë‹¤!
        2. íŒŒë¼ë¯¸í„°ëŠ” ë‹¨ì¼ê°’ ë˜ëŠ” ê°ì²´í˜•ì‹ì„ ë³´ë‚¼ ìˆ˜ ìˆìŒ
        ì¸ìŠ¤í„´ìŠ¤ ë‚´ë¶€êµ¬ì—­ ì½”ë”©ì‹œ storeì— $ì—†ìŒ!
        */
       store.commit('initSet',{
        url:"https://img.freepik.com/premium-vector/city-illustration_23-2147514701.jpg",
        txt:"ë„ì‹œì†Œê°œì— ì˜¤ì‹ ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!",
       });

       // ations ë©”ì„œë“œ í˜¸ì¶œí•˜ê¸°! : dispatch(ë©”ì„œë“œëª…,ì „ë‹¬ê°’)
       store.dispatch('myAct','ë‚˜ì•¼ë‚˜!!!');

    }, //// created ////
    // DOM ìƒì„±í›„ ì‹¤í–‰êµ¬ì—­(mounted) : ì œì´ì¿¼ë¦¬(JS) ì½”ë“œ
    mounted(){
        // 1. ë©”ë‰´í´ë¦­ì‹œ í´ë¦­ëœ liì˜ aìš”ì†Œì— .onì£¼ê¸°
        // ë‚˜ë¨¸ì§€ëŠ” .onì§€ìš°ê³  homeì€ ì ìš©ì œì™¸!
        $('.gnb a').click(function(){
            // ë„£ê¸°ëŠ” ì²«ë²ˆì§¸ê» ì œì™¸
            if($(this).parent().index()!==0){
                $(this).addClass('on');
            } /// if ////
            // ì§€ìš°ê¸°ëŠ” ë¬´ì¡°ê±´
            $(this).parent().siblings()
            .find('a').removeClass('on');

            // ë°•ìŠ¤ ë‚˜íƒ€ë‚˜ê¸° í•¨ìˆ˜í˜¸ì¶œ
            showBox();
        });

        function showBox(){
            // ì´ë¯¸ì§€ì™€ ì„¤ëª…ë°•ìŠ¤ ìˆœì„œëŒ€ë¡œ ë‚˜íƒ€ë‚˜ê¸°
            // ëŒ€ìƒ: 
            $('main img').css({opacity:0}).stop()
            .delay(200).fadeTo(500,1);
            // stop() - ê¸°ì¡´ì• ë‹ˆë©”ì´ì…˜ ì§€ì›€
            // fadeTo(ì‹œê°„,íˆ¬ëª…ë„) - opacityì• ë‹ˆë©”ì´ì…˜

            $('main p').css({opacity:0}).stop()
            .delay(400).fadeTo(500,1);


        } /////// showBox ////////


    }, //// mounted /////


});